# 1. 概述

这个实例是在学习了 Node.js 和 mongoDB 数据库后，使用 express + mongoose 制作的一个小 Demo。

# 2. 相关依赖

- mongoose
  - mongodb 数据库连接管理
- Express
  - node 框架
- art-template
  - 模板引擎
  - 其他模板引擎：ejs、pug（原 jade）、handlebars
- express-art-template
  - express 对 art-template 模板引擎的支持
- body-parser
  - post 解析

# 3. 启动服务

app.js：

```js
let express = require('express');

// 创建 server
let app = express();

// 开发 public 的静态资源
app.use('/public/', express.static(path.join(__dirname) + './public/'));
app.use('/node_modules/', express.static(path.join(__dirname) + './node_modules/'));

app.get('/', (req, res) => {
    res.send('hello word');
})

// 设置监听
app.listen(3000, () => {
    console.dir('port on localhost:3000')
})
```

# 4. 基本配置

## 4.1 配置 post 解析

app.js：

```js
var bodyParser = require('body-parser');

// parse application/x-www-form-urlencoded
app.use(bodyParser.urlencoded({ extended: false }))
// parse application/json
app.use(bodyParser.json())
```

## 4.2 配置模板引擎

app.js：

```js
app.engine('html', require('express-art-template'));
app.set('views', path.join(__dirname, './views'));
```

## 4.3 测试

app.js：

```js
let express = require('express');
let path = require('path');
var bodyParser = require('body-parser');

let app = express();

app.use('/public/', express.static(path.join(__dirname, '/public/')));
app.use('/node_modules/', express.static(path.join(__dirname, '/node_modules/')));

app.engine('html', require('express-art-template'));
app.set('views', path.join(__dirname, './views'));

// parse application/x-www-form-urlencoded
app.use(bodyParser.urlencoded({ extended: false }))
// parse application/json
app.use(bodyParser.json())

app.get('/', (req, res) => {
    res.render('index.html',{
        author: "lemon"
    })
})

app.listen(3000, () => {
    console.dir('port on localhost:3000')
})
```

